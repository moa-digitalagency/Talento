{% extends "cinema/base_cinema.html" %}

{% block title %}{{ 'Modifier' if production else 'Ajouter' }} Production - TalentsMaroc.com{% endblock %}

{% block cinema_content %}
<div class="mb-8">
    <h1 class="text-4xl font-bold text-gray-800 mb-2 flex items-center gap-3">
        <span>üé¨</span>
        <span>{{ 'Modifier' if production else 'Ajouter' }} une Production</span>
    </h1>
    <p class="text-gray-600">{{ 'Modifiez' if production else 'Ajoutez' }} les informations de la production cin√©matographique</p>
</div>

<form method="POST" class="bg-white rounded-lg shadow-md p-8">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        
        <!-- Informations de base -->
        <div class="md:col-span-2">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üìã</span>
                <span>Informations de base</span>
            </h2>
        </div>
        
        <div class="md:col-span-2">
            <label class="block text-gray-700 font-semibold mb-2">Titre *</label>
            <input type="text" name="title" value="{{ production.title if production else '' }}" required
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div class="md:col-span-2">
            <label class="block text-gray-700 font-semibold mb-2">Titre original</label>
            <input type="text" name="original_title" value="{{ production.original_title if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Type de production *</label>
            <select name="production_type" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="">S√©lectionner...</option>
                <option value="Film" {% if production and production.production_type == 'Film' %}selected{% endif %}>Film</option>
                <option value="S√©rie" {% if production and production.production_type == 'S√©rie' %}selected{% endif %}>S√©rie</option>
                <option value="Court-m√©trage" {% if production and production.production_type == 'Court-m√©trage' %}selected{% endif %}>Court-m√©trage</option>
                <option value="Documentaire" {% if production and production.production_type == 'Documentaire' %}selected{% endif %}>Documentaire</option>
                <option value="T√©l√©film" {% if production and production.production_type == 'T√©l√©film' %}selected{% endif %}>T√©l√©film</option>
                <option value="Animation" {% if production and production.production_type == 'Animation' %}selected{% endif %}>Animation</option>
            </select>
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Genre</label>
            <input type="text" name="genre" value="{{ production.genre if production else '' }}" placeholder="Drame, Com√©die, Action..."
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Statut</label>
            <select name="status" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="En d√©veloppement" {% if production and production.status == 'En d√©veloppement' %}selected{% endif %}>En d√©veloppement</option>
                <option value="En production" {% if production and production.status == 'En production' %}selected{% endif %}>En production</option>
                <option value="Post-production" {% if production and production.status == 'Post-production' %}selected{% endif %}>Post-production</option>
                <option value="Sortie" {% if production and production.status == 'Sortie' %}selected{% endif %}>Sortie</option>
                <option value="Annul√©" {% if production and production.status == 'Annul√©' %}selected{% endif %}>Annul√©</option>
            </select>
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Dur√©e (minutes)</label>
            <input type="number" name="duration" value="{{ production.duration if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <!-- D√©tails de production -->
        <div class="md:col-span-2 mt-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üé•</span>
                <span>D√©tails de production</span>
            </h2>
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">R√©alisateur</label>
            <input type="text" name="director" value="{{ production.director if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Producteur</label>
            <input type="text" name="producer" value="{{ production.producer if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Soci√©t√© de production</label>
            <input type="text" name="production_company" value="{{ production.production_company if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Pays</label>
            <input type="text" name="country" value="{{ production.country if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Langue</label>
            <input type="text" name="language" value="{{ production.language if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Classification</label>
            <input type="text" name="rating" value="{{ production.rating if production else '' }}" placeholder="Tous publics, -12, -16..."
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <!-- Dates -->
        <div class="md:col-span-2 mt-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üìÖ</span>
                <span>Dates</span>
            </h2>
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Ann√©e de production</label>
            <input type="number" name="production_year" value="{{ production.production_year if production else '' }}" min="1900" max="2100"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Date de sortie</label>
            <input type="date" name="release_date" value="{{ production.release_date.strftime('%Y-%m-%d') if production and production.release_date else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">D√©but de tournage</label>
            <input type="date" name="start_date" value="{{ production.start_date.strftime('%Y-%m-%d') if production and production.start_date else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Fin de tournage</label>
            <input type="date" name="end_date" value="{{ production.end_date.strftime('%Y-%m-%d') if production and production.end_date else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <!-- Descriptions -->
        <div class="md:col-span-2 mt-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üìù</span>
                <span>Descriptions</span>
            </h2>
        </div>
        
        <div class="md:col-span-2">
            <label class="block text-gray-700 font-semibold mb-2">Synopsis</label>
            <textarea name="synopsis" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">{{ production.synopsis if production else '' }}</textarea>
        </div>
        
        <div class="md:col-span-2">
            <label class="block text-gray-700 font-semibold mb-2">Description d√©taill√©e</label>
            <textarea name="description" rows="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">{{ production.description if production else '' }}</textarea>
        </div>
        
        <!-- Budget et Revenus -->
        <div class="md:col-span-2 mt-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üí∞</span>
                <span>Budget et Revenus</span>
            </h2>
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Budget</label>
            <input type="text" name="budget" value="{{ production.budget if production else '' }}" placeholder="Ex: 5 millions USD"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">Box-office</label>
            <input type="text" name="box_office" value="{{ production.box_office if production else '' }}" placeholder="Ex: 50 millions USD"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <!-- M√©dias et Liens -->
        <div class="md:col-span-2 mt-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üîó</span>
                <span>M√©dias et Liens</span>
            </h2>
        </div>
        
        <div class="md:col-span-2">
            <label class="block text-gray-700 font-semibold mb-2">URL de l'affiche</label>
            <input type="url" name="poster_url" value="{{ production.poster_url if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div class="md:col-span-2">
            <label class="block text-gray-700 font-semibold mb-2">URL de la bande-annonce</label>
            <input type="url" name="trailer_url" value="{{ production.trailer_url if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">ID IMDb</label>
            <input type="text" name="imdb_id" value="{{ production.imdb_id if production else '' }}" placeholder="tt1234567"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div>
            <label class="block text-gray-700 font-semibold mb-2">ID TMDb</label>
            <input type="text" name="tmdb_id" value="{{ production.tmdb_id if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
        
        <div class="md:col-span-2">
            <label class="block text-gray-700 font-semibold mb-2">Site web officiel</label>
            <input type="url" name="website" value="{{ production.website if production else '' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>
    </div>
    
    <!-- Boutons d'action -->
    <div class="flex gap-4 mt-8">
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition-all shadow-md hover:shadow-lg">
            {{ 'Mettre √† jour' if production else 'Cr√©er la production' }}
        </button>
        <a href="{{ url_for('cinema.productions') }}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-8 py-3 rounded-lg font-semibold transition-all">
            Annuler
        </a>
    </div>
</form>
{% endblock %}

{% extends "base.html" %}

{% block title %}Profil CINEMA de {{ talent.full_name }} - TalentsMaroc.com{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8 px-4">
    <div class="max-w-5xl mx-auto">
        
        <div class="mb-6 flex flex-col sm:flex-row gap-3 sm:justify-between">
            {% if current_user.is_authenticated and current_user.is_admin %}
            <a href="{{ url_for('cinema.talents') }}" 
               class="px-4 sm:px-6 py-2 sm:py-3 bg-gray-100 text-gray-700 font-bold rounded-lg border-2 border-gray-500 hover:bg-gray-200 transition-all flex items-center justify-center gap-2 text-sm sm:text-base">
                <span>‚óÄÔ∏è</span>
                <span>Retour</span>
            </a>
            {% else %}
            <div></div>
            {% endif %}
            
            <a href="{{ url_for('cinema.export_pdf', code=talent.unique_code) }}" 
               class="px-4 sm:px-6 py-2 sm:py-3 bg-red-50 text-red-700 font-bold rounded-lg border-2 border-red-500 hover:bg-red-100 transition-all flex items-center justify-center gap-2 text-sm sm:text-base shadow-md">
                <span>üìÑ</span>
                <span>T√©l√©charger PDF</span>
            </a>
        </div>

        <!-- SECTION 1: Identit√© & Contact -->
        <div class="section-blue p-6 mb-8">
            <div class="flex flex-col lg:flex-row gap-6 lg:gap-8 items-start lg:items-center">
                
                <!-- Photo -->
                <div class="flex-shrink-0 mx-auto lg:mx-0">
                    {% if talent.id_photo_filename %}
                    <img src="{{ url_for('static', filename='uploads/photos/' + talent.id_photo_filename) }}" 
                         alt="{{ talent.full_name }}" 
                         class="w-48 h-48 rounded-full object-cover border-4 border-blue-500 shadow-xl">
                    {% else %}
                    <div class="w-48 h-48 rounded-full bg-gradient-to-br from-purple-400 to-pink-600 flex items-center justify-center text-white text-6xl font-bold border-4 border-purple-500 shadow-xl">
                        {{ talent.first_name[0] if talent.first_name else '?' }}{{ talent.last_name[0] if talent.last_name else '?' }}
                    </div>
                    {% endif %}
                </div>
                
                <!-- Informations principales - Centr√©es verticalement avec la photo -->
                <div class="flex-1 flex flex-col justify-center text-center lg:text-left">
                    <div class="space-y-3">
                        <p class="text-4xl lg:text-5xl font-bold text-gray-900">{{ talent.full_name }}</p>
                        <p class="text-xl lg:text-2xl text-gray-600 font-semibold">
                            {% if talent.age %}{{ talent.age }} ans{% endif %}
                            {% if talent.gender_display %} ¬∑ {{ talent.gender_display }}{% endif %}
                        </p>
                        <p class="text-2xl lg:text-3xl text-purple-600 font-mono font-bold tracking-wider">{{ talent.unique_code }}</p>
                    </div>
                </div>

                <!-- QR Code et Document d'identit√© align√©s -->
                <div class="flex-shrink-0 space-y-4 mx-auto lg:mx-0">
                    {% if talent.qr_code_filename %}
                    <div class="bg-white p-4 rounded-xl border-2 border-purple-300 w-full max-w-sm shadow-lg">
                        <img src="{{ url_for('static', filename='uploads/qrcodes/' + talent.qr_code_filename) }}" 
                             alt="QR Code CINEMA" 
                             class="w-40 h-40 mx-auto">
                        <p class="text-sm text-gray-600 mt-3 font-mono font-bold text-center">{{ talent.unique_code }}</p>
                        <p class="text-xs text-gray-500 text-center mt-1">Scannez pour voir le profil</p>
                    </div>
                    {% endif %}
                    
                    {% if talent.id_document_type %}
                    <div class="bg-white p-5 rounded-lg border-2 border-blue-200">
                        <h3 class="text-lg font-bold text-blue-800 mb-3 flex items-center gap-2">
                            <span>üìã</span>
                            <span>Document d'identit√©</span>
                        </h3>
                        <div class="space-y-2">
                            <p class="text-sm text-gray-600">Type de document</p>
                            <p class="text-lg font-semibold text-gray-800">
                                {% if talent.id_document_type == 'passport' %}
                                üìò Passeport
                                {% elif talent.id_document_type == 'national_id' %}
                                ü™™ Carte d'identit√© nationale
                                {% else %}
                                {{ talent.id_document_type }}
                                {% endif %}
                            </p>
                            {% if decrypted.id_document_number %}
                            <p class="text-sm text-gray-600 mt-3">Num√©ro de document</p>
                            <p class="text-lg font-semibold text-gray-800 font-mono">{{ decrypted.id_document_number }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- BLOC S√âPAR√â: Coordonn√©es -->
        {% if talent.email or decrypted.phone or decrypted.whatsapp or talent.website %}
        <div class="section-blue p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span>üìû</span>
                <span>Coordonn√©es</span>
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                {% if talent.email %}
                <div class="bg-white p-4 rounded-lg border-2 border-blue-200">
                    <h3 class="text-md font-bold text-blue-800 mb-2 flex items-center gap-2">
                        <span>üìß</span>
                        <span>Email</span>
                    </h3>
                    <a href="mailto:{{ talent.email }}" class="text-blue-600 hover:underline text-sm break-all">{{ talent.email }}</a>
                </div>
                {% endif %}
                
                {% if decrypted.phone %}
                <div class="bg-white p-4 rounded-lg border-2 border-blue-200">
                    <h3 class="text-md font-bold text-blue-800 mb-2 flex items-center gap-2">
                        <span>üì±</span>
                        <span>T√©l√©phone</span>
                    </h3>
                    <p class="text-gray-700 font-semibold text-sm">{{ decrypted.phone }}</p>
                </div>
                {% endif %}
                
                {% if decrypted.whatsapp %}
                <div class="bg-white p-4 rounded-lg border-2 border-blue-200">
                    <h3 class="text-md font-bold text-blue-800 mb-2 flex items-center gap-2">
                        <span>üí¨</span>
                        <span>WhatsApp</span>
                    </h3>
                    <p class="text-gray-700 font-semibold text-sm">{{ decrypted.whatsapp }}</p>
                </div>
                {% endif %}
                
                {% if talent.website %}
                <div class="bg-white p-4 rounded-lg border-2 border-blue-200">
                    <h3 class="text-md font-bold text-blue-800 mb-2 flex items-center gap-2">
                        <span>üåê</span>
                        <span>Site Web</span>
                    </h3>
                    <a href="{{ talent.website }}" target="_blank" class="text-blue-600 hover:underline text-sm break-all">{{ talent.website }}</a>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- SECTION 2: Origines -->
        <div class="section-green p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span>üåç</span>
                <span>Origines</span>
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                
                <!-- Sous-bloc: Ethnicit√© -->
                {% if parsed.ethnicities %}
                <div class="bg-white p-4 rounded-lg border-2 border-green-200">
                    <h3 class="text-md font-bold text-green-800 mb-3">Ethnicit√©</h3>
                    <div class="flex flex-wrap gap-2">
                        {% for ethnicity in parsed.ethnicities %}
                        <span class="badge-green">{{ ethnicity }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Sous-bloc: Pays d'origine -->
                {% if talent.country_of_origin %}
                <div class="bg-white p-4 rounded-lg border-2 border-green-200">
                    <h3 class="text-md font-bold text-green-800 mb-3">Pays d'origine</h3>
                    <div class="flex flex-wrap gap-2">
                        <span class="badge-green">{% if country_flags.origin %}{{ country_flags.origin }} {% endif %}{{ talent.country_of_origin }}</span>
                    </div>
                </div>
                {% endif %}

                <!-- Sous-bloc: Nationalit√© -->
                {% if talent.nationality %}
                <div class="bg-white p-4 rounded-lg border-2 border-green-200">
                    <h3 class="text-md font-bold text-green-800 mb-3">Nationalit√©</h3>
                    <div class="flex flex-wrap gap-2">
                        <span class="badge-green">{% if country_flags.nationality %}{{ country_flags.nationality }} {% endif %}{{ talent.nationality }}</span>
                    </div>
                </div>
                {% endif %}

            </div>
        </div>

        <!-- SECTION 3: R√©sidence -->
        {% if talent.country_of_residence %}
        <div class="section-violet p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span>üè†</span>
                <span>R√©sidence</span>
            </h2>

            <!-- Sous-bloc: Lieu de r√©sidence actuel -->
            <div class="bg-white p-5 rounded-lg border-2 border-purple-200">
                <h3 class="text-md font-bold text-purple-800 mb-3">Lieu de r√©sidence actuel</h3>
                <p class="text-xl font-semibold text-gray-700">
                    {% if talent.city_of_residence %}{{ talent.city_of_residence }}, {% endif %}{% if country_flags.residence %}{{ country_flags.residence }} {% endif %}{{ talent.country_of_residence }}
                </p>
            </div>
        </div>
        {% endif %}

        <!-- SECTION 4: Langues parl√©es -->
        {% if parsed.languages %}
        <div class="section-cyan p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üó£Ô∏è</span>
                <span>Langues parl√©es</span>
            </h2>
            <div class="flex flex-wrap gap-2">
                {% for language in parsed.languages %}
                <span class="badge-cyan">{{ language }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- SECTION 5: Caract√©ristiques physiques -->
        {% if talent.height or talent.eye_color or talent.hair_color or talent.hair_type or talent.skin_tone or talent.build %}
        <div class="section-orange p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span>üëÅÔ∏è</span>
                <span>Caract√©ristiques physiques</span>
            </h2>

            <!-- Sous-bloc: Apparence physique -->
            <div class="bg-white p-5 rounded-lg border-2 border-orange-200">
                <h3 class="text-md font-bold text-orange-800 mb-4">Apparence physique</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                    {% if talent.height %}
                    <div class="bg-orange-50 p-3 rounded-lg border border-orange-200">
                        <p class="text-xs text-gray-600 mb-1">Taille</p>
                        <p class="text-lg font-bold text-orange-700">{{ talent.height }} cm</p>
                    </div>
                    {% endif %}
                    {% if talent.eye_color %}
                    <div class="bg-orange-50 p-3 rounded-lg border border-orange-200">
                        <p class="text-xs text-gray-600 mb-1">Yeux</p>
                        <p class="text-sm font-bold text-orange-700">{{ talent.eye_color }}</p>
                    </div>
                    {% endif %}
                    {% if talent.hair_color %}
                    <div class="bg-orange-50 p-3 rounded-lg border border-orange-200">
                        <p class="text-xs text-gray-600 mb-1">Couleur cheveux</p>
                        <p class="text-sm font-bold text-orange-700">{{ talent.hair_color }}</p>
                    </div>
                    {% endif %}
                    {% if talent.hair_type %}
                    <div class="bg-orange-50 p-3 rounded-lg border border-orange-200">
                        <p class="text-xs text-gray-600 mb-1">Type cheveux</p>
                        <p class="text-sm font-bold text-orange-700">{{ talent.hair_type }}</p>
                    </div>
                    {% endif %}
                    {% if talent.skin_tone %}
                    <div class="bg-orange-50 p-3 rounded-lg border border-orange-200">
                        <p class="text-xs text-gray-600 mb-1">Teint</p>
                        <p class="text-sm font-bold text-orange-700">{{ talent.skin_tone }}</p>
                    </div>
                    {% endif %}
                    {% if talent.build %}
                    <div class="bg-orange-50 p-3 rounded-lg border border-orange-200">
                        <p class="text-xs text-gray-600 mb-1">Corpulence</p>
                        <p class="text-sm font-bold text-orange-700">{{ talent.build }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}

        <!-- SECTION 6: Types de talent -->
        {% if parsed.talent_types %}
        <div class="section-yellow p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üé≠</span>
                <span>Types de talent</span>
            </h2>
            <div class="flex flex-wrap gap-2">
                {% for talent_type in parsed.talent_types %}
                <span class="badge-yellow">{{ talent_type }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- SECTION 7: Vos comp√©tences artistiques -->
        {% if parsed.talents %}
        <div class="section-pink p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>‚ú®</span>
                <span>Vos comp√©tences artistiques</span>
            </h2>
            <div class="flex flex-wrap gap-2">
                {% for talent_name in parsed.talents %}
                <span class="badge-pink">{{ talent_name }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- SECTION 8: Vos profils sur les r√©seaux sociaux -->
        {% if decrypted.facebook or decrypted.instagram or decrypted.twitter or decrypted.youtube or decrypted.tiktok or decrypted.snapchat or decrypted.linkedin or decrypted.telegram or decrypted.imdb_url or decrypted.threads %}
        <div class="section-indigo p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üì±</span>
                <span>Vos profils sur les r√©seaux sociaux</span>
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                {% if decrypted.facebook %}
                <a href="https://facebook.com/{{ decrypted.facebook }}" target="_blank" class="bg-blue-100 hover:bg-blue-200 text-blue-700 p-3 rounded-lg border-2 border-blue-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    Facebook
                </a>
                {% endif %}
                {% if decrypted.instagram %}
                <a href="https://instagram.com/{{ decrypted.instagram }}" target="_blank" class="bg-pink-100 hover:bg-pink-200 text-pink-700 p-3 rounded-lg border-2 border-pink-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    Instagram
                </a>
                {% endif %}
                {% if decrypted.twitter %}
                <a href="https://twitter.com/{{ decrypted.twitter }}" target="_blank" class="bg-sky-100 hover:bg-sky-200 text-sky-700 p-3 rounded-lg border-2 border-sky-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    Twitter
                </a>
                {% endif %}
                {% if decrypted.youtube %}
                <a href="https://youtube.com/@{{ decrypted.youtube }}" target="_blank" class="bg-red-100 hover:bg-red-200 text-red-700 p-3 rounded-lg border-2 border-red-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    YouTube
                </a>
                {% endif %}
                {% if decrypted.tiktok %}
                <a href="https://tiktok.com/@{{ decrypted.tiktok }}" target="_blank" class="bg-gray-100 hover:bg-gray-200 text-gray-700 p-3 rounded-lg border-2 border-gray-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    TikTok
                </a>
                {% endif %}
                {% if decrypted.snapchat %}
                <a href="https://snapchat.com/add/{{ decrypted.snapchat }}" target="_blank" class="bg-yellow-100 hover:bg-yellow-200 text-yellow-700 p-3 rounded-lg border-2 border-yellow-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    Snapchat
                </a>
                {% endif %}
                {% if decrypted.linkedin %}
                <a href="https://linkedin.com/in/{{ decrypted.linkedin }}" target="_blank" class="bg-blue-100 hover:bg-blue-200 text-blue-800 p-3 rounded-lg border-2 border-blue-400 flex items-center justify-center gap-2 transition-all font-semibold">
                    LinkedIn
                </a>
                {% endif %}
                {% if decrypted.telegram %}
                <a href="https://t.me/{{ decrypted.telegram.lstrip('@') }}" target="_blank" class="bg-cyan-100 hover:bg-cyan-200 text-cyan-700 p-3 rounded-lg border-2 border-cyan-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    Telegram
                </a>
                {% endif %}
                {% if decrypted.imdb_url %}
                <a href="{{ decrypted.imdb_url }}" target="_blank" class="bg-amber-100 hover:bg-amber-200 text-amber-700 p-3 rounded-lg border-2 border-amber-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    IMDb
                </a>
                {% endif %}
                {% if decrypted.threads %}
                <a href="https://threads.net/{{ decrypted.threads.lstrip('@') }}" target="_blank" class="bg-gray-100 hover:bg-gray-200 text-gray-800 p-3 rounded-lg border-2 border-gray-300 flex items-center justify-center gap-2 transition-all font-semibold">
                    Threads
                </a>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- SECTION 9: Productions pr√©c√©dentes -->
        {% if parsed.productions %}
        <div class="section-red p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <span>üé•</span>
                <span>Productions pr√©c√©dentes</span>
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {% for production in parsed.productions %}
                <div class="bg-white p-4 rounded-lg border-2 border-red-200">
                    <h3 class="font-bold text-gray-800">{{ production.title }}</h3>
                    <p class="text-sm text-gray-600">{{ production.type }} ¬∑ {{ production.year }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- SECTION 10: Galerie photos -->
        <div class="section-emerald p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span>üì∏</span>
                <span>Galerie photos</span>
            </h2>
            
            {% if talent.photo_1 or talent.photo_2 or talent.photo_3 %}
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% if talent.photo_1 %}
                <div class="bg-white p-4 rounded-lg border-2 border-emerald-200 shadow-sm">
                    <img src="{{ url_for('static', filename='uploads/photos/' + talent.photo_1) }}" 
                         alt="Photo 1" 
                         class="w-full h-64 object-cover rounded-lg">
                    <p class="text-center text-sm text-gray-600 mt-2 font-semibold">Photo 1</p>
                </div>
                {% endif %}
                {% if talent.photo_2 %}
                <div class="bg-white p-4 rounded-lg border-2 border-emerald-200 shadow-sm">
                    <img src="{{ url_for('static', filename='uploads/photos/' + talent.photo_2) }}" 
                         alt="Photo 2" 
                         class="w-full h-64 object-cover rounded-lg">
                    <p class="text-center text-sm text-gray-600 mt-2 font-semibold">Photo 2</p>
                </div>
                {% endif %}
                {% if talent.photo_3 %}
                <div class="bg-white p-4 rounded-lg border-2 border-emerald-200 shadow-sm">
                    <img src="{{ url_for('static', filename='uploads/photos/' + talent.photo_3) }}" 
                         alt="Photo 3" 
                         class="w-full h-64 object-cover rounded-lg">
                    <p class="text-center text-sm text-gray-600 mt-2 font-semibold">Photo 3</p>
                </div>
                {% endif %}
            </div>
            {% else %}
            <div class="bg-white p-8 rounded-lg border-2 border-emerald-200 text-center">
                <p class="text-gray-500 text-lg font-semibold">üì∑ Photos non disponibles</p>
                <p class="text-gray-400 text-sm mt-2">Aucune photo n'a √©t√© ajout√©e √† ce profil</p>
            </div>
            {% endif %}
        </div>

    </div>
</div>
{% endblock %}

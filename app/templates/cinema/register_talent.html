{% extends "cinema/base_cinema.html" %}

{% block title %}Inscription Talent CINEMA - Talento{% endblock %}

{% block cinema_content %}
<div class="max-w-4xl mx-auto">
    <!-- Header Section -->
    <div class="text-center mb-12">
        <div class="inline-block mb-4">
            <span class="text-6xl">üé¨</span>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
            Inscription Talent CINEMA
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Rejoignez notre base de donn√©es de talents cin√©matographiques
        </p>
        <div class="mt-6 flex items-center justify-center gap-2">
            <div class="h-1 w-20 bg-purple-500 rounded-full"></div>
            <div class="h-1 w-20 bg-pink-500 rounded-full"></div>
            <div class="h-1 w-20 bg-orange-500 rounded-full"></div>
        </div>
    </div>
    
    <form method="POST" action="{{ url_for('cinema.register_talent') }}" enctype="multipart/form-data" id="cinemaRegisterForm" class="space-y-8">
        {{ form.hidden_tag() if form }}
        
        <!-- Section 1: Identit√© + Contact + Document d'identit√© (Bleu) -->
        <div class="section-blue p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üë§</span>
                    <div>
                        <h2 class="text-2xl font-bold text-blue-700">Identit√© & Contact</h2>
                        <p class="text-blue-600 text-sm mt-1">Informations personnelles et coordonn√©es</p>
                    </div>
                </div>
                <div class="bg-blue-100 rounded-full px-5 py-2 border-2 border-blue-400">
                    <span class="text-blue-700 font-bold">Section 1/9</span>
                </div>
            </div>
            <div class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label for="first_name" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                            Pr√©nom <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="first_name" name="first_name" required 
                               class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                    </div>
                    <div class="space-y-2">
                        <label for="last_name" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                            Nom <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="last_name" name="last_name" required 
                               class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                    </div>
                    <div class="space-y-2">
                        <label for="date_of_birth" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                            Date de naissance <span class="text-red-500">*</span>
                        </label>
                        <input type="date" id="date_of_birth" name="date_of_birth" required 
                               class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                    </div>
                    <div class="space-y-2">
                        <label for="gender" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                            Genre <span class="text-red-500">*</span>
                        </label>
                        <select id="gender" name="gender" required 
                                class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                            <option value="">S√©lectionner...</option>
                            <option value="M">üë® Homme</option>
                            <option value="F">üë© Femme</option>
                            <option value="N">‚ößÔ∏è Non pr√©cis√©</option>
                        </select>
                    </div>
                </div>

                <!-- Document d'identit√© -->
                <div class="mt-6 pt-6 border-t-2 border-dotted border-blue-300">
                    <h3 class="text-lg font-bold text-blue-700 mb-4">üìã Document d'identit√©</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label for="id_document_type" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                                Type de document <span class="text-red-500">*</span>
                            </label>
                            <select id="id_document_type" name="id_document_type" required 
                                    class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                                <option value="">S√©lectionner...</option>
                                <option value="passport">üìò Passeport</option>
                                <option value="national_id">ü™™ Carte d'identit√© nationale</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label for="id_document_number" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                                Num√©ro du document <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="id_document_number" name="id_document_number" required 
                                   placeholder="Ex: AB1234567"
                                   class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                        </div>
                    </div>
                </div>

                <!-- Contact -->
                <div class="mt-6 pt-6 border-t-2 border-dotted border-blue-300">
                    <h3 class="text-lg font-bold text-blue-700 mb-4">üìû Coordonn√©es</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label for="email" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                                Email <span class="text-red-500">*</span>
                            </label>
                            <input type="email" id="email" name="email" required 
                                   placeholder="exemple@email.com"
                                   class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                        </div>
                        <div class="space-y-2">
                            <label for="phone" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                                T√©l√©phone <span class="text-red-500">*</span>
                            </label>
                            <input type="tel" id="phone" name="phone" required 
                                   placeholder="+212 6 XX XX XX XX"
                                   class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                        </div>
                        <div class="space-y-2">
                            <label for="whatsapp" class="block text-gray-700 font-semibold text-sm">
                                WhatsApp
                            </label>
                            <input type="tel" id="whatsapp" name="whatsapp" 
                                   placeholder="+212 6 XX XX XX XX"
                                   class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                        </div>
                        <div class="space-y-2">
                            <label for="website" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                                üåê Site Web Personnel
                            </label>
                            <input type="url" id="website" name="website" 
                                   placeholder="https://mon-site-web.com"
                                   class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 outline-none">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 2: Origines (Vert) -->
        <div class="section-green p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üåç</span>
                    <div>
                        <h2 class="text-2xl font-bold text-green-700">Origines</h2>
                        <p class="text-green-600 text-sm mt-1">Ethnicit√©, pays d'origine et nationalit√©</p>
                    </div>
                </div>
                <div class="bg-green-100 rounded-full px-5 py-2 border-2 border-green-400">
                    <span class="text-green-700 font-bold">Section 2/9</span>
                </div>
            </div>
            <div class="space-y-6">
                <div class="space-y-2">
                    <label class="block text-gray-700 font-semibold text-sm mb-3">
                        Ethnicit√©(s) <small class="text-gray-500">(Choix multiple possible)</small>
                    </label>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-64 overflow-y-auto p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                        {% set ethnicities = ['Africaine', 'Afro-Am√©ricaine', 'Am√©rindienne', 'Arabe', 'Asiatique de l\'Est', 'Asiatique du Sud', 'Asiatique du Sud-Est', 'Berb√®re', 'Carib√©enne', 'Caucasienne/Blanche', 'Hispanique/Latino', 'M√©tisse', 'Moyen-Orientale', 'Oc√©anienne/Pacifique', 'Autre'] %}
                        {% for ethnicity in ethnicities %}
                        <label class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-green-50 cursor-pointer transition-colors">
                            <input type="checkbox" name="ethnicities" value="{{ ethnicity }}" class="w-4 h-4 text-green-600 rounded">
                            <span class="text-sm text-gray-700">{{ ethnicity }}</span>
                        </label>
                        {% endfor %}
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label for="country_of_origin" class="block text-gray-700 font-semibold text-sm">
                            Pays d'origine
                        </label>
                        <select id="country_of_origin" name="country_of_origin" 
                                class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 outline-none">
                            <option value="">S√©lectionner...</option>
                            {% for country in countries %}
                            <option value="{{ country.name }}">{{ country.flag }} {{ country.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label for="nationality" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                            Nationalit√© <span class="text-red-500">*</span>
                        </label>
                        <select id="nationality" name="nationality" required 
                                class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all duration-200 outline-none">
                            <option value="">S√©lectionner...</option>
                            {% for nat in nationalities %}
                            <option value="{{ nat.nationality }}">{{ nat.flag }} {{ nat.nationality }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 3: R√©sidence (Violet) -->
        <div class="section-purple p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üìç</span>
                    <div>
                        <h2 class="text-2xl font-bold text-purple-700">R√©sidence</h2>
                        <p class="text-purple-600 text-sm mt-1">Lieu de r√©sidence actuel</p>
                    </div>
                </div>
                <div class="bg-purple-100 rounded-full px-5 py-2 border-2 border-purple-400">
                    <span class="text-purple-700 font-bold">Section 3/9</span>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                    <label for="country_of_residence" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        Pays de r√©sidence <span class="text-red-500">*</span>
                    </label>
                    <select id="country_of_residence" name="country_of_residence" required 
                            class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all duration-200 outline-none"
                            onchange="loadCitiesByCountry(this.value)">
                        <option value="">S√©lectionner...</option>
                        {% for country in countries %}
                        <option value="{{ country.code }}" data-name="{{ country.name }}">{{ country.flag }} {{ country.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="space-y-2">
                    <label for="city_of_residence" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        Ville de r√©sidence <span class="text-red-500">*</span>
                    </label>
                    <select id="city_of_residence" name="city_of_residence" required 
                            class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all duration-200 outline-none"
                            disabled>
                        <option value="">S√©lectionnez d'abord un pays...</option>
                    </select>
                    <small class="text-gray-500 text-xs">Les villes se chargeront automatiquement apr√®s la s√©lection du pays</small>
                </div>
            </div>
        </div>

        <!-- Section 4: Langues (Cyan) -->
        <div class="section-cyan p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üó£Ô∏è</span>
                    <div>
                        <h2 class="text-2xl font-bold text-cyan-700">Langues</h2>
                        <p class="text-cyan-600 text-sm mt-1">Langues parl√©es</p>
                    </div>
                </div>
                <div class="bg-cyan-100 rounded-full px-5 py-2 border-2 border-cyan-400">
                    <span class="text-cyan-700 font-bold">Section 4/9</span>
                </div>
            </div>
            <div class="space-y-2">
                <label class="block text-gray-700 font-semibold text-sm mb-3">
                    S√©lectionnez vos langues <small class="text-gray-500">(Choix multiple possible)</small>
                </label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 max-h-64 overflow-y-auto p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                    {% for language in languages %}
                    <label class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-cyan-50 cursor-pointer transition-colors">
                        <input type="checkbox" name="languages" value="{{ language['name'] }}" class="w-4 h-4 text-cyan-600 rounded">
                        <span class="text-sm text-gray-700">{{ language['flag'] }} {{ language['name'] }}</span>
                    </label>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Section 5: Caract√©ristiques physiques (Orange) -->
        <div class="section-orange p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üëÅÔ∏è</span>
                    <div>
                        <h2 class="text-2xl font-bold text-orange-700">Caract√©ristiques physiques</h2>
                        <p class="text-orange-600 text-sm mt-1">Apparence physique</p>
                    </div>
                </div>
                <div class="bg-orange-100 rounded-full px-5 py-2 border-2 border-orange-400">
                    <span class="text-orange-700 font-bold">Section 5/9</span>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-2">
                    <label for="eye_color" class="block text-gray-700 font-semibold text-sm">Couleur des yeux</label>
                    <select id="eye_color" name="eye_color" 
                            class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200 outline-none">
                        <option value="">S√©lectionner...</option>
                        {% for color in eye_colors %}
                        <option value="{{ color }}">{{ color }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="space-y-2">
                    <label for="hair_color" class="block text-gray-700 font-semibold text-sm">Couleur des cheveux</label>
                    <select id="hair_color" name="hair_color" 
                            class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200 outline-none">
                        <option value="">S√©lectionner...</option>
                        {% for color in hair_colors %}
                        <option value="{{ color }}">{{ color }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="space-y-2">
                    <label for="hair_type" class="block text-gray-700 font-semibold text-sm">Type de cheveux</label>
                    <select id="hair_type" name="hair_type" 
                            class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200 outline-none">
                        <option value="">S√©lectionner...</option>
                        {% for type in hair_types %}
                        <option value="{{ type }}">{{ type }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="space-y-2">
                    <label for="height" class="block text-gray-700 font-semibold text-sm">Taille (cm)</label>
                    <input type="number" id="height" name="height" min="100" max="250" 
                           placeholder="Ex: 175"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="skin_tone" class="block text-gray-700 font-semibold text-sm">Teint de peau</label>
                    <select id="skin_tone" name="skin_tone" 
                            class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200 outline-none">
                        <option value="">S√©lectionner...</option>
                        {% for tone in skin_tones %}
                        <option value="{{ tone }}">{{ tone }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="space-y-2">
                    <label for="build" class="block text-gray-700 font-semibold text-sm">Corpulence</label>
                    <select id="build" name="build" 
                            class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all duration-200 outline-none">
                        <option value="">S√©lectionner...</option>
                        {% for build_type in build_types %}
                        <option value="{{ build_type }}">{{ build_type }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <!-- Section 6: Type de talent (Violet) -->
        <div class="section-purple p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üé≠</span>
                    <div>
                        <h2 class="text-2xl font-bold text-purple-700">Type de talent</h2>
                        <p class="text-purple-600 text-sm mt-1">Votre r√¥le dans l'industrie du cin√©ma</p>
                    </div>
                </div>
                <div class="bg-purple-100 rounded-full px-5 py-2 border-2 border-purple-400">
                    <span class="text-purple-700 font-bold">Section 6/9</span>
                </div>
            </div>
            <div class="space-y-2">
                <label class="block text-gray-700 font-semibold text-sm mb-3">
                    S√©lectionnez votre(vos) type(s) de talent <small class="text-gray-500">(Choix multiple possible)</small>
                </label>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                    {% for talent_type in cinema_talent_types %}
                    <label class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-purple-50 cursor-pointer transition-colors">
                        <input type="checkbox" name="talent_types" value="{{ talent_type }}" class="w-4 h-4 text-purple-600 rounded">
                        <span class="text-sm text-gray-700">{{ talent_type }}</span>
                    </label>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Section 7: Talents (Rose) -->
        <div class="section-pink p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">‚≠ê</span>
                    <div>
                        <h2 class="text-2xl font-bold text-pink-700">Talents</h2>
                        <p class="text-pink-600 text-sm mt-1">Vos comp√©tences artistiques</p>
                    </div>
                </div>
                <div class="bg-pink-100 rounded-full px-5 py-2 border-2 border-pink-400">
                    <span class="text-pink-700 font-bold">Section 7/9</span>
                </div>
            </div>
            <div class="space-y-6">
                {% for category in talent_categories %}
                <div class="space-y-3">
                    <h3 class="text-md font-bold text-gray-800 flex items-center gap-2">
                        <span class="text-2xl">{{ category.emoji }}</span>
                        {{ category.name }}
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                        {% for talent in category.talents %}
                        <label class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-pink-50 cursor-pointer transition-colors">
                            <input type="checkbox" name="other_talents" value="{{ talent }}" class="w-4 h-4 text-pink-600 rounded">
                            <span class="text-sm text-gray-700">{{ talent }}</span>
                        </label>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Section 8: R√©seaux sociaux (Indigo) -->
        <div class="section-indigo p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üåê</span>
                    <div>
                        <h2 class="text-2xl font-bold text-indigo-700">R√©seaux sociaux</h2>
                        <p class="text-indigo-600 text-sm mt-1">Vos profils sur les r√©seaux sociaux</p>
                    </div>
                </div>
                <div class="bg-indigo-100 rounded-full px-5 py-2 border-2 border-indigo-400">
                    <span class="text-indigo-700 font-bold">Section 8/9</span>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                    <label for="facebook" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üìò Facebook
                    </label>
                    <input type="url" id="facebook" name="facebook" 
                           placeholder="https://facebook.com/votre.profil"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="instagram" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üì∑ Instagram
                    </label>
                    <input type="url" id="instagram" name="instagram" 
                           placeholder="https://instagram.com/votre.profil"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="tiktok" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üéµ TikTok
                    </label>
                    <input type="url" id="tiktok" name="tiktok" 
                           placeholder="https://tiktok.com/@votre.profil"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="snapchat" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üëª Snapchat
                    </label>
                    <input type="text" id="snapchat" name="snapchat" 
                           placeholder="votre.username"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="youtube" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üì∫ YouTube
                    </label>
                    <input type="url" id="youtube" name="youtube" 
                           placeholder="https://youtube.com/@votre.chaine"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="twitter" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üê¶ X (Twitter)
                    </label>
                    <input type="url" id="twitter" name="twitter" 
                           placeholder="https://x.com/votre.profil"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="linkedin" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üíº LinkedIn
                    </label>
                    <input type="url" id="linkedin" name="linkedin" 
                           placeholder="https://linkedin.com/in/votre.profil"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="telegram" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        ‚úàÔ∏è Telegram
                    </label>
                    <input type="text" id="telegram" name="telegram" 
                           placeholder="@votre.username"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="imdb_url" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üé¨ IMDb
                    </label>
                    <input type="url" id="imdb_url" name="imdb_url" 
                           placeholder="https://imdb.com/name/..."
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
                <div class="space-y-2">
                    <label for="threads" class="block text-gray-700 font-semibold text-sm flex items-center gap-2">
                        üßµ Threads
                    </label>
                    <input type="url" id="threads" name="threads" 
                           placeholder="https://threads.net/@votre.profil"
                           class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
                </div>
            </div>
        </div>

        <!-- Section 9: Photos & Productions pr√©c√©dentes (Rouge) -->
        <div class="section-red p-8">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <span class="text-5xl">üì∏</span>
                    <div>
                        <h2 class="text-2xl font-bold text-red-700">Photos & Productions</h2>
                        <p class="text-red-600 text-sm mt-1">Vos photos et exp√©rience cin√©matographique</p>
                    </div>
                </div>
                <div class="bg-red-100 rounded-full px-5 py-2 border-2 border-red-400">
                    <span class="text-red-700 font-bold">Section 9/9</span>
                </div>
            </div>
            <div class="space-y-6">
                <!-- Photos -->
                <div class="space-y-4">
                    <h3 class="text-lg font-bold text-red-700">üì∑ Photos</h3>
                    <div class="space-y-2">
                        <label for="id_photo" class="block text-gray-700 font-semibold text-sm">üì∑ Photo d'identit√© (max 5 MB)</label>
                        <input type="file" id="id_photo" name="id_photo" accept="image/*" 
                               class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all duration-200 outline-none">
                    </div>
                    <div class="space-y-2">
                        <label for="gallery_photos" class="block text-gray-700 font-semibold text-sm">
                            üì∑ Galerie de photos (max 5 MB chacune) <small class="text-gray-500">(Plusieurs photos possibles)</small>
                        </label>
                        <input type="file" id="gallery_photos" name="gallery_photos" accept="image/*" multiple 
                               class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all duration-200 outline-none">
                    </div>
                </div>

                <!-- Productions pr√©c√©dentes -->
                <div class="mt-6 pt-6 border-t-2 border-dotted border-red-300">
                    <h3 class="text-lg font-bold text-red-700 mb-4">üé¨ Productions pr√©c√©dentes</h3>
                    
                    <!-- Search Box -->
                    <div class="mb-4">
                        <label for="movie_search" class="block text-gray-700 font-semibold text-sm mb-2">
                            Rechercher des films/s√©ries
                        </label>
                        <div class="relative">
                            <input type="text" id="movie_search" 
                                   placeholder="Tapez le titre d'un film ou d'une s√©rie..."
                                   class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all duration-200 outline-none">
                            <div id="search_results" class="absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-lg hidden max-h-64 overflow-y-auto"></div>
                        </div>
                    </div>

                    <!-- Selected Productions -->
                    <div id="selected_productions" class="space-y-2 mb-4"></div>
                    
                    <!-- Hidden field for JSON data -->
                    <input type="hidden" id="previous_productions" name="previous_productions" value="[]">
                    
                    <!-- Or manual text entry -->
                    <div class="mt-4 p-4 bg-gray-50 rounded-xl border-2 border-dotted border-gray-300">
                        <p class="text-sm text-gray-600 mb-2">
                            <strong>Ou d√©crivez manuellement vos productions :</strong>
                        </p>
                        <textarea id="productions_manual" rows="4" 
                                  placeholder="Ex: - Film ABC (2020) - R√¥le principal&#10;- S√©rie XYZ (2022) - Figuration"
                                  class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 transition-all duration-200 outline-none"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="text-center py-8">
            <button type="submit" class="btn-primary px-12 py-4 text-lg">
                ‚úÖ Enregistrer mon profil CINEMA
            </button>
        </div>
    </form>
</div>

<script>
// City loading functionality
function loadCitiesByCountry(countryCode) {
    let cityField = document.getElementById('city_of_residence');
    const parent = cityField.parentElement;
    
    if (!countryCode) {
        // Reset to select with disabled state
        if (cityField.tagName !== 'SELECT') {
            const newSelect = document.createElement('select');
            newSelect.id = 'city_of_residence';
            newSelect.name = 'city_of_residence';
            newSelect.required = true;
            newSelect.className = cityField.className;
            parent.replaceChild(newSelect, cityField);
            cityField = newSelect;
        }
        cityField.disabled = true;
        cityField.innerHTML = '<option value="">S√©lectionnez d\'abord un pays...</option>';
        return;
    }
    
    // Ensure we have a select element
    if (cityField.tagName !== 'SELECT') {
        const newSelect = document.createElement('select');
        newSelect.id = 'city_of_residence';
        newSelect.name = 'city_of_residence';
        newSelect.required = true;
        newSelect.className = cityField.className;
        parent.replaceChild(newSelect, cityField);
        cityField = newSelect;
    }
    
    // Show loading state
    cityField.disabled = true;
    cityField.innerHTML = '<option value="">Chargement des villes...</option>';
    
    // Fetch cities for the selected country
    fetch(`/cinema/api/cities/${countryCode}`)
        .then(res => res.json())
        .then(data => {
            if (data.cities && data.cities.length > 0) {
                cityField.innerHTML = '<option value="">S√©lectionner une ville...</option>' +
                    data.cities.map(city => `<option value="${city}">${city}</option>`).join('');
                cityField.disabled = false;
            } else {
                // No predefined cities, convert to text input
                const newInput = document.createElement('input');
                newInput.type = 'text';
                newInput.id = 'city_of_residence';
                newInput.name = 'city_of_residence';
                newInput.required = true;
                newInput.placeholder = 'Entrez le nom de votre ville';
                newInput.className = cityField.className;
                parent.replaceChild(newInput, cityField);
            }
        })
        .catch(err => {
            console.error('Error loading cities:', err);
            // On error, convert to text input
            const newInput = document.createElement('input');
            newInput.type = 'text';
            newInput.id = 'city_of_residence';
            newInput.name = 'city_of_residence';
            newInput.required = true;
            newInput.placeholder = 'Entrez le nom de votre ville (erreur de chargement)';
            newInput.className = cityField.className;
            parent.replaceChild(newInput, cityField);
        });
}

// Movie search functionality
let searchTimeout;
let selectedMovies = [];

const movieSearch = document.getElementById('movie_search');
const searchResults = document.getElementById('search_results');
const selectedProductions = document.getElementById('selected_productions');
const previousProductionsInput = document.getElementById('previous_productions');

movieSearch.addEventListener('input', function(e) {
    clearTimeout(searchTimeout);
    const query = e.target.value.trim();
    
    if (query.length < 2) {
        searchResults.classList.add('hidden');
        return;
    }
    
    searchTimeout = setTimeout(() => {
        fetch(`/cinema/api/search_movies?query=${encodeURIComponent(query)}`)
            .then(res => res.json())
            .then(data => {
                if (data.error) {
                    searchResults.innerHTML = `<div class="p-4 text-red-600">${data.error}</div>`;
                    searchResults.classList.remove('hidden');
                    return;
                }
                
                if (data.results && data.results.length > 0) {
                    searchResults.innerHTML = data.results.map(movie => `
                        <div class="p-3 hover:bg-gray-100 cursor-pointer border-b border-gray-100 flex items-center gap-3" onclick="addMovie(${JSON.stringify(movie).replace(/"/g, '&quot;')})">
                            ${movie.poster_url ? `<img src="${movie.poster_url}" class="w-12 h-16 object-cover rounded" alt="">` : '<div class="w-12 h-16 bg-gray-200 rounded flex items-center justify-center text-2xl">üé¨</div>'}
                            <div>
                                <div class="font-semibold">${movie.title}</div>
                                <div class="text-sm text-gray-600">${movie.type} ${movie.year ? '(' + movie.year + ')' : ''}</div>
                            </div>
                        </div>
                    `).join('');
                    searchResults.classList.remove('hidden');
                } else {
                    searchResults.innerHTML = '<div class="p-4 text-gray-600">Aucun r√©sultat trouv√©</div>';
                    searchResults.classList.remove('hidden');
                }
            })
            .catch(err => {
                searchResults.innerHTML = '<div class="p-4 text-red-600">Erreur de recherche</div>';
                searchResults.classList.remove('hidden');
            });
    }, 300);
});

function addMovie(movie) {
    if (selectedMovies.find(m => m.tmdb_id === movie.tmdb_id)) {
        alert('Cette production est d√©j√† ajout√©e');
        return;
    }
    
    selectedMovies.push(movie);
    updateSelectedMovies();
    searchResults.classList.add('hidden');
    movieSearch.value = '';
}

function removeMovie(tmdb_id) {
    selectedMovies = selectedMovies.filter(m => m.tmdb_id !== tmdb_id);
    updateSelectedMovies();
}

function updateSelectedMovies() {
    if (selectedMovies.length === 0) {
        selectedProductions.innerHTML = '';
        previousProductionsInput.value = '[]';
        return;
    }
    
    selectedProductions.innerHTML = selectedMovies.map(movie => `
        <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg border-2 border-green-200">
            <div class="flex items-center gap-3">
                ${movie.poster_url ? `<img src="${movie.poster_url}" class="w-10 h-14 object-cover rounded" alt="">` : '<div class="w-10 h-14 bg-gray-200 rounded flex items-center justify-center">üé¨</div>'}
                <div>
                    <div class="font-semibold text-gray-800">${movie.title}</div>
                    <div class="text-sm text-gray-600">${movie.type} ${movie.year ? '(' + movie.year + ')' : ''}</div>
                </div>
            </div>
            <button type="button" onclick="removeMovie(${movie.tmdb_id})" class="text-red-600 hover:text-red-800 px-3 py-1 rounded-lg hover:bg-red-100">
                ‚úï
            </button>
        </div>
    `).join('');
    
    previousProductionsInput.value = JSON.stringify(selectedMovies);
}

// Hide search results when clicking outside
document.addEventListener('click', function(e) {
    if (!movieSearch.contains(e.target) && !searchResults.contains(e.target)) {
        searchResults.classList.add('hidden');
    }
});
</script>
{% endblock %}

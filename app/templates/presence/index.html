{% extends "cinema/base_cinema.html" %}

{% block title %}Gestion des PrÃ©sences - TalentsMaroc.com{% endblock %}

{% block cinema_content %}
<div class="w-full">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-4xl font-bold text-gray-800 mb-2 flex items-center gap-3">
            <span>ðŸ“‹</span>
            <span>Gestion des PrÃ©sences</span>
        </h1>
        <p class="text-gray-600">SÃ©lectionnez un projet pour enregistrer les prÃ©sences</p>
    </div>

    <!-- Liste des projets -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% for project in projects %}
        <a href="{{ url_for('presence.project_attendance', project_id=project.id) }}" 
           class="block bg-white rounded-lg border-2 border-dotted border-purple-300 hover:border-purple-500 hover:shadow-lg transition-all p-6">
            <div class="flex items-start justify-between mb-4">
                <div class="flex-1">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">{{ project.name }}</h3>
                    <p class="text-sm text-gray-600 mb-2">{{ project.production_type }}</p>
                </div>
                <span class="px-3 py-1 rounded-full text-xs font-semibold 
                    {% if project.status == 'en_cours' %}bg-green-100 text-green-700
                    {% elif project.status == 'en_preparation' %}bg-blue-100 text-blue-700
                    {% elif project.status == 'termine' %}bg-gray-100 text-gray-700
                    {% else %}bg-yellow-100 text-yellow-700{% endif %}">
                    {{ project.status|replace('_', ' ')|title }}
                </span>
            </div>
            
            <div class="flex items-center gap-2 text-sm text-gray-500">
                <span>ðŸ“…</span>
                <span>
                    {% if project.start_date %}{{ project.start_date.strftime('%d/%m/%Y') }}{% endif %}
                    {% if project.end_date %} - {{ project.end_date.strftime('%d/%m/%Y') }}{% endif %}
                </span>
            </div>
            
            <div class="mt-4 pt-4 border-t-2 border-dotted border-gray-200">
                <div class="flex items-center justify-between text-sm">
                    <span class="text-gray-600">ðŸ‘¥ Talents assignÃ©s:</span>
                    <span class="font-bold text-gray-800">{{ project.project_talents|length }}</span>
                </div>
            </div>
        </a>
        {% else %}
        <div class="col-span-full text-center py-12">
            <span class="text-6xl mb-4 block">ðŸ“‚</span>
            <p class="text-xl text-gray-600">Aucun projet actif</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
